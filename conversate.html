<head>
  <title>Conversate</title>
</head>

<body>
	{{> page}}
</body>

<template name="page">
	{{#if has_user}}
	<div class="container">
		{{> nav}}
		<div class="row">
			<div class="span3 view">
				{{> views}}
			</div>
			<div class="span4 conversations">
				{{> conversations}}
			</div>
			<div class="span5 conversation">
				{{> messages}}
				{{> editor}}
			</div>
		</div>
	</div>
	{{else}}
	{{> login}}
	{{/if}}
</template>

<template name="login">
	<div class="container">
		<div class="navbar">
  			<div class="navbar-inner">
		    		<a class="brand" href="#">Conversate</a>
   	 			<ul class="nav">
      					<li class="active"><a href="#">Login</a></li>
    				</ul>
  			</div>
		</div>
		{{> users}}
	</div>
</template>

<template name="nav">
	<div class="navbar">
  		<div class="navbar-inner">
    		<a class="brand" href="#">Conversate</a>
    		<ul class="nav">
      			<li class="active"><a href="#">Messages</a></li>
      			<li><a href="#">Contacts</a></li>
      			<li><a href="#">Calendar</a></li>
    		</ul>
			<ul class="nav pull-right">
				<li><a class="italicized" href="#">{{ current_user }}</a></li>
				<li><a href="#">Settings</a></li>
				<li><a class="nav-signout" href="#">Signout</a></li>
			</ul>
  		</div>
	</div>
</template>

<template name="views">
	<ul class="nav nav-list">
	  <li><a href="#">Home</a></li>
	  <li class="active"><a href="#">All Messages</a></li>
	</ul>
</template>

<template name="conversations">
		<ul class="nav nav-tabs nav-stacked">
		{{#each conversations}}
			<li class="conversation-item" id="{{_id}}">
					<a href="#">
						{{conversation_name}}  
						<span class="conversation-item-date">{{conversation_time}}</span><br />
						<span class="conversation-item-body">{{conversation_body}}</span>
					</a>
			</li>	
		{{/each}}
			<li class="conversation-item conversation-add">
				<a href="#">+</a>
			</li>
		</ul>
</template>


<template name="editor">
	<textarea id="message-text" />
	<input type="button" id="send" value="Send" />
	<p><input type="button" id="nuke" value="NUKE ALL MESSAGES"></p>
</template>

<template name="messages">
	<div class="messages">
		{{#each messages}}
			<div class="message">
				<p class="bold">{{from}}</p>
				<p>{{{message_display}}}</p>
			</div>
		{{/each}}
	</div>
</template>

<template name="users">
	<p>
		Username:
		<input type="text" id="name" />
	</p>
	<p><input type="button" id="be" value="Select" /></p>
</template>
