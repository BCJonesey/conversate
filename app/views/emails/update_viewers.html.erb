<% if (action.added && !action.added.empty?) && (!action.removed || action.removed.empty?) %>
<%= action.user.name %> added <%= action.added.map {|p| p.name}.join(', ') %> as a viewer
<% elsif (!action.added || action.added.empty?) && (action.removed && !action.removed.empty?) %>
<%= action.user.name %> removed <%= action.removed.map {|p| p.name}.join(', ') %> as a viewer
<% else %>
<%= action.user.name %> added <%= action.added.map {|p| p.name}.join(', ') as a viewer and removed <%= action.removed.map {|p| p.name}.join(', ') %> as a viewer
<% end %>
